<script>
// This is where we initialise any global variables, namespaced in "opensdg".
var opensdg = function() {

  var remoteDataBaseUrl = '{{ page.remote_data_prefix }}';
  var chartAlterations = [];
  var dataRoundings = [];

  return {
    // Get the base URL for asynchronous calls to SDG data.
    getRemoteDataBaseUrl: function() { return remoteDataBaseUrl; },

    // Add functions to alter the Chart.js configuration.
    addChartAlteration: function(callback) { chartAlterations.push(callback); },

    // This modifies the passed "config" and "info" objects in-place.
    performChartAlterations: function(config, info) {
      chartAlterations.forEach(function(callback) {
        callback(config, info);
      });
    },

    // Add functions to alter data values before displaying on tables/graphs.
    addDataRounding: function(callback) { dataRoundings.push(callback); },

    // This returns the rounded data value.
    performDataRounding: function(data) {
      dataRoundings.forEach(function(callback) {
        data = callback(data);
      });
      return data;
    },
  };
}();

</script>
